<Window x:Class="X9AEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:X9AEditor"
        mc:Ignorable="d"
        Title="{Binding LoadedFilePath, StringFormat=X9A Editor - {0}, TargetNullValue=X9A Editor}"
        Width="600" Height="450" MinWidth="400" MinHeight="200" WindowStartupLocation="CenterScreen"
        AllowDrop="True" Drop="Window_Drop" PreviewDragOver="Window_PreviewDragOver">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Menu Grid.Row="0">
            <MenuItem Header="File">
                <MenuItem Header="Open..." Command="{Binding OpenCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_OpenFile}"/>
                <Separator/>
                <MenuItem Header="Save" Command="{Binding SaveCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_Save}"/>
                <MenuItem Header="Save as..." Command="{Binding SaveAsCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_SaveAs}"/>
                <Separator/>
                <MenuItem Header="Close" Command="{Binding CloseCommand}"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="GitHub" Command="{Binding GitHubCommand}"/>
                <MenuItem Header="About..." Command="{Binding AboutCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_StatusInformation}"/>
            </MenuItem>
        </Menu>
        <ToolBarTray Grid.Row="1" Background="White">
            <ToolBar>
                <Button Command="{Binding CopyCommand}" ToolTip="Copy" Content="{StaticResource VisualStudio2022ImageLibrary_Copy}"/>
                <Button Command="{Binding PasteCommand}" ToolTip="Paste" Content="{StaticResource VisualStudio2022ImageLibrary_Paste}"/>
                <Separator/>
                <Button Command="{Binding MoveUpCommand}" ToolTip="Move up" Content="{StaticResource VisualStudio2022ImageLibrary_MoveUp}"/>
                <Button Command="{Binding MoveDownCommand}" ToolTip="Move down" Content="{StaticResource VisualStudio2022ImageLibrary_MoveDown}"/>
                <Separator/>
                <Button Command="{Binding UndoChangesCommand}" ToolTip="Undo changes" Content="{StaticResource VisualStudio2022ImageLibrary_Undo}"/>
                <Button Command="{Binding ResetToFactorySettingCommand}" ToolTip="Reset to factory setting" Content="{StaticResource VisualStudio2022ImageLibrary_Settings}"/>
                <Button Command="{Binding InitializeCommand}" ToolTip="Initialize" Content="{StaticResource VisualStudio2022ImageLibrary_Delete}"/>
            </ToolBar>
            <ToolBar>
                <ContentPresenter Content="{StaticResource VisualStudio2022ImageLibrary_Search}"/>
                <TextBlock Text="Search:" VerticalAlignment="Center" Margin="4,0,6,0"/>
                <TextBox Name="searchTextBox" Width="200">
                    <TextBox.InputBindings>
                        <KeyBinding Command="{Binding SearchCommand}" CommandParameter="{Binding Text, ElementName=searchTextBox}" Key="Enter"/>
                    </TextBox.InputBindings>
                </TextBox>
            </ToolBar>
        </ToolBarTray>
        <DataGrid Name="dataGrid" Grid.Row="2" ItemsSource="{Binding Voices}" SelectionChanged="DataGrid_SelectionChanged" AutoGenerateColumns="False" GridLinesVisibility="None" 
                  CanUserAddRows="False" CanUserDeleteRows="False" CanUserSortColumns="False" CanUserReorderColumns="False" CanUserResizeRows="False">
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="ContextMenu">
                        <Setter.Value>
                            <ContextMenu>
                                <MenuItem Header="Copy" Command="{Binding MainViewModel.CopyCommand}" InputGestureText="Ctrl+C" Icon="{StaticResource VisualStudio2022ImageLibrary_Copy}"/>
                                <MenuItem Header="Paste" Command="{Binding MainViewModel.PasteCommand}" InputGestureText="Ctrl+V" Icon="{StaticResource VisualStudio2022ImageLibrary_Paste}"/>
                                <Separator/>
                                <MenuItem Header="Move up" Command="{Binding MainViewModel.MoveUpCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_MoveUp}"/>
                                <MenuItem Header="Move down" Command="{Binding MainViewModel.MoveDownCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_MoveDown}"/>
                                <Separator/>
                                <MenuItem Header="Undo changes" Command="{Binding MainViewModel.UndoChangesCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_Undo}"/>
                                <MenuItem Header="Reset to factory setting" Command="{Binding MainViewModel.ResetToFactorySettingCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_Settings}"/>
                                <MenuItem Header="Initialize" Command="{Binding MainViewModel.InitializeCommand}" Icon="{StaticResource VisualStudio2022ImageLibrary_Delete}"/>
                            </ContextMenu>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsInitSound}" Value="True">
                            <Setter Property="Foreground" Value="DarkGray"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
            <DataGrid.InputBindings>
                <KeyBinding Modifiers="Control" Key="C" Command="{Binding CopyCommand}" />
                <KeyBinding Modifiers="Control" Key="V" Command="{Binding PasteCommand}" />
            </DataGrid.InputBindings>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Live Set Page" Binding="{Binding LiveSetPage, Mode=OneWay}"/>
                <DataGridTextColumn Header="Live Set Index" Binding="{Binding LiveSetIndex, Mode=OneWay}"/>
                <DataGridTextColumn Header="Voice Name" Binding="{Binding Name, Mode=TwoWay, ValidatesOnExceptions=True}" Width="*">
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="MaxLength" Value="15"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>
                <!--<DataGridTextColumn Header="IsChanged" Binding="{Binding IsChanged, Mode=OneWay}"/>
                <DataGridTextColumn Header="IsFactorySetting" Binding="{Binding IsFactorySetting, Mode=OneWay}"/>-->
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
